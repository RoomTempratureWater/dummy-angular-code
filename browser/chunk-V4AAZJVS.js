import{a as x,b as c,c as A,d as R,e as D,g as h,h as I,j as k,k as G,m as L,n as j}from"./chunk-67KY7TMX.js";import{Ea as s,Fa as C,Ga as F,Ja as f,O as g,S as b,aa as i,bb as _,da as u,db as T,eb as N,fa as y,hb as w,ib as E,pa as p,qa as d,ua as a,va as r,wa as o,xa as l,za as S}from"./chunk-A36ACV2Y.js";import"./chunk-2VMXMS7J.js";var q=()=>["/login"],M=()=>["/register"];function U(e,v){e&1&&(r(0,"a",5),s(1,"Have an account?"),o()),e&2&&a("routerLink",f(1,q))}function V(e,v){e&1&&(r(0,"a",5),s(1,"Need an account?"),o()),e&2&&a("routerLink",f(1,M))}function H(e,v){e&1&&l(0,"input",10)}var $=(()=>{class e{constructor(m,n,t){this.route=m,this.router=n,this.userService=t,this.authType="",this.title="",this.errors={errors:{}},this.isSubmitting=!1,this.destroyRef=g(b),this.authForm=new D({email:new h("",{validators:[c.required],nonNullable:!0}),password:new h("",{validators:[c.required],nonNullable:!0})})}ngOnInit(){this.authType=this.route.snapshot.url.at(-1).path,this.title=this.authType==="login"?"Sign in":"Sign up",this.authType==="register"&&this.authForm.addControl("username",new h("",{validators:[c.required],nonNullable:!0}))}submitForm(){this.isSubmitting=!0,this.errors={errors:{}},(this.authType==="login"?this.userService.login(this.authForm.value):this.userService.register(this.authForm.value)).pipe(E(this.destroyRef)).subscribe({next:()=>void this.router.navigate(["/"]),error:n=>{this.errors=n,this.isSubmitting=!1}})}static{this.\u0275fac=function(n){return new(n||e)(u(_),u(T),u(w))}}static{this.\u0275cmp=y({type:e,selectors:[["app-auth-page"]],decls:20,vars:9,consts:[[1,"auth-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"routerLink"],[3,"errors"],[3,"ngSubmit","formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","username","placeholder","Username","type","text",1,"form-control","form-control-lg"],["formControlName","email","placeholder","Email","type","text",1,"form-control","form-control-lg"],["formControlName","password","placeholder","Password","type","password",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"disabled"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),s(5),o(),r(6,"p",4),p(7,U,2,2,"a",5),p(8,V,2,2,"a",5),o(),l(9,"app-list-errors",6),r(10,"form",7),S("ngSubmit",function(){return t.submitForm()}),r(11,"fieldset",8)(12,"fieldset",9),p(13,H,1,0,"input",10),o(),r(14,"fieldset",9),l(15,"input",11),o(),r(16,"fieldset",9),l(17,"input",12),o(),r(18,"button",13),s(19),o()()()()()()()),n&2&&(i(5),C(t.title),i(2),d(t.authType==="register"?7:-1),i(),d(t.authType==="login"?8:-1),i(),a("errors",t.errors),i(),a("formGroup",t.authForm),i(),a("disabled",t.isSubmitting),i(2),d(t.authType==="register"?13:-1),i(5),a("disabled",!t.authForm.valid),i(),F(" ",t.title," "))},dependencies:[N,j,L,I,x,A,R,k,G],encapsulation:2})}}return e})();export{$ as default};
